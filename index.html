<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktywny Kwestionariusz Briefingowy B2B</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .form-section { background-color: white; border-radius: 0.75rem; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); border-left: 4px solid #3b82f6; }
        .form-label { display: block; font-weight: 600; margin-bottom: 0.5rem; color: #374151; }
        .form-input, .form-textarea { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; }
        .btn { color: white; font-weight: 700; padding: 0.5rem 1.5rem; border-radius: 0.5rem; cursor: pointer; }
        .btn-primary { background-color: #2563eb; } .btn-primary:hover { background-color: #1d4ed8; }
        .btn-primary:disabled { background-color: #9ca3af; cursor: not-allowed; } .btn-secondary { background-color: #4f46e5; }
        .section-title { font-size: 1.5rem; font-weight: 700; color: #111827; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid #e5e7eb; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; z-index: 50; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
        .modal-overlay.is-visible { opacity: 1; visibility: visible; }
        .modal-content { background-color: white; padding: 2rem; border-radius: 0.75rem; text-align: center; max-width: 500px; width: 90%; }
    </style>
</head>
<body>
    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8"><h1 class="text-3xl md:text-4xl font-bold text-gray-800">Kwestionariusz Briefingowy B2B</h1></header>
        <form id="brief-form">
            <div class="form-section">
                <h2 class="section-title">1. Podstawowe informacje o firmie</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div><label for="companyName" class="form-label">Pełna nazwa firmy</label><input type="text" id="companyName" name="Pełna nazwa firmy" class="form-input"></div>
                    <div><label for="website" class="form-label">Adres strony internetowej</label><input type="url" id="website" name="Adres strony internetowej" class="form-input url-autofill" placeholder="np. www.example.com"></div>
                </div>
                <div class="mt-6"><label for="industry" class="form-label">Branża / Sektor działalności</label><input type="text" id="industry" name="Branża" class="form-input"></div>
                <div class="mt-6"><label for="companyDescription" class="form-label">Krótki opis firmy (misja, wartości)</label><textarea id="companyDescription" name="Opis firmy" class="form-textarea"></textarea></div>
                <div class="mt-6"><label class="form-label">Profile w mediach społecznościowych</label><div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><input type="url" name="Social Media - LinkedIn" class="form-input url-autofill" placeholder="LinkedIn URL"><input type="url" name="Social Media - Facebook" class="form-input url-autofill" placeholder="Facebook URL"><input type="url" name="Social Media - Instagram" class="form-input url-autofill" placeholder="Instagram URL"><input type="url" name="Social Media - YouTube" class="form-input url-autofill" placeholder="YouTube URL"></div></div>
            </div>
            <div class="form-section">
                <h2 class="section-title">2. Oferowany produkt / usługa</h2>
                <div><label for="productDescription" class="form-label">Co dokładnie Państwo sprzedają?</label><textarea id="productDescription" name="Opis produktu/usługi" class="form-textarea"></textarea></div>
                <div class="mt-6"><label for="clientProblem" class="form-label">Jaki główny problem klienta rozwiązuje Państwa produkt/usługa?</label><textarea id="clientProblem" name="Rozwiązywany problem klienta" class="form-textarea"></textarea></div>
                <div class="mt-6"><label for="uvp" class="form-label">Unikalna Propozycja Wartości (UVP)</label><textarea id="uvp" name="Unikalna Propozycja Wartości (UVP)" class="form-textarea" placeholder="Co wyróżnia Państwa ofertę na tle konkurencji?"></textarea></div>
                <div class="mt-6"><label for="pricingModel" class="form-label">Model cenowy i średni przychód z klienta (rocznie)</label><input type="text" id="pricingModel" name="Model cenowy" class="form-input" placeholder="np. Subskrypcja, 15 000 PLN/rok"></div>
            </div>
            <div class="form-section">
                <h2 class="section-title">3. Grupa docelowa</h2>
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Idealny Profil Klienta (ICP)</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div><label class="form-label">Branża</label><input type="text" name="ICP - Branża" class="form-input"></div>
                    <div><label class="form-label">Wielkość firmy</label><input type="text" name="ICP - Wielkość firmy" class="form-input" placeholder="np. 10-50 pracowników"></div>
                    <div><label class="form-label">Lokalizacja geograficzna</label><input type="text" name="ICP - Lokalizacja" class="form-input" placeholder="np. Polska, UE"></div>
                    <div><label class="form-label">Inne kluczowe cechy</label><input type="text" name="ICP - Inne cechy" class="form-input" placeholder="np. używane technologie"></div>
                </div>
                <div id="personas-container" class="mt-8">
                    <div class="persona-block border-t-2 border-gray-200 pt-6 mt-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Buyer Persona #1</h3>
                        <div><label class="form-label">Stanowisko</label><input type="text" name="Persona 1 - Stanowisko" class="form-input" placeholder="np. Dyrektor Sprzedaży, CEO"></div>
                        <div class="mt-6"><label class="form-label">Wyzwania zawodowe i "bóle"</label><div class="challenges-table space-y-2"><div class="challenges-container space-y-4 sm:space-y-2"><div class="challenge-row grid grid-cols-1 sm:grid-cols-2 gap-4"><textarea name="Persona 1 - Wyzwanie 1" class="form-textarea" placeholder="Opis wyzwania"></textarea><textarea name="Persona 1 - Odpowiedź 1" class="form-textarea" placeholder="Nasze rozwiązanie"></textarea></div></div></div><button type="button" class="add-challenge-btn btn btn-secondary text-sm mt-2">Dodaj kolejne wyzwanie</button></div>
                    </div>
                </div>
                <button type="button" id="add-persona-btn" class="btn btn-primary mt-6">Dodaj kolejną Personę</button>
            </div>
            <div class="form-section"><h2 class="section-title">4. Cele i Oczekiwania</h2><div><label class="form-label">Główny, nadrzędny cel współpracy</label><input type="text" name="Główny cel współpracy" class="form-input" placeholder="np. pozyskanie 10 nowych klientów w Q3"></div><div class="mt-6"><label class="form-label">Kluczowe wskaźniki sukcesu (KPIs)</label><input type="text" name="Kluczowe wskaźniki sukcesu (KPIs)" class="form-input" placeholder="np. liczba umówionych spotkań miesięcznie"></div><div class="mt-6"><label class="form-label">Dotychczasowe doświadczenia z prospectingiem</label><textarea name="Doświadczenia z prospectingiem" class="form-textarea" placeholder="Co działało dobrze, a co nie?"></textarea></div></div>
            <div class="form-section"><h2 class="section-title">5. Konkurencja i Rynek</h2><div><label class="form-label">Główni konkurenci (2-3 firmy)</label><input type="text" name="Główni konkurenci" class="form-input"></div><div class="mt-6"><label class="form-label">Mocne i słabe strony oferty vs konkurencja</label><textarea name="Mocne i słabe strony vs konkurencja" class="form-textarea"></textarea></div></div>
            <div class="form-section"><h2 class="section-title">6. Obecne działania marketingowe</h2><div><label class="form-label">Jaki jest miesięczny budżet na reklamy (Ad Spend)?</label><input type="text" name="Budżet reklamowy" class="form-input"></div><div class="mt-6"><label class="form-label">Czy w firmie jest dedykowana osoba/dział marketingu?</label><input type="text" name="Osoba od marketingu" class="form-input"></div><div class="mt-6"><label class="form-label">Jak regularnie publikują Państwo treści (posty, artykuły)?</label><input type="text" name="Regularność publikacji" class="form-input"></div></div>
            <div class="form-section"><h2 class="section-title">7. Kwestie techniczne i operacyjne</h2><div><label class="form-label">Z jakich kluczowych narzędzi (CRM, Marketing Automation) Państwo korzystają?</label><input type="text" name="Używane narzędzia" class="form-input" placeholder="np. HubSpot, Pipedrive, Salesmanago"></div><div class="mt-6"><label class="form-label">Główna osoba do kontaktu</label><input type="text" name="Osoba do kontaktu" class="form-input"></div><div class="mt-6"><label class="form-label">Czy posiadają Państwo materiały marketingowe?</label><input type="text" name="Materiały marketingowe" class="form-input" placeholder="np. studia przypadków, prezentacje"></div></div>
            <div class="mt-8"><button type="submit" id="submit-btn" class="btn btn-primary w-full text-lg flex items-center justify-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" id="submit-spinner" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span id="submit-btn-text">Wyślij Brief Automatycznie</span></button></div>
        </form>
        <div id="response-modal" class="modal-overlay"><div class="modal-content" id="modal-content-inner"></div></div>
        <script>
            const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxjNkmRCpYgRPF0U1UR_uhkarPBaiQRynkRn0HVgZfl_4nzzhndZbjlD5_id2sNreamkw/exec';
            const form = document.getElementById('brief-form');
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.getElementById('submit-btn-text');
            const spinner = document.getElementById('submit-spinner');
            const modal = document.getElementById('response-modal');
            const modalContent = document.getElementById('modal-content-inner');
            const addPersonaBtn = document.getElementById('add-persona-btn');
            const personasContainer = document.getElementById('personas-container');
            let personaCounter = 1;
            const urlInputs = document.querySelectorAll('.url-autofill');
            const formatUrl = (el) => { let url = el.value.trim(); if (url && !/^https?:\/\//i.test(url)) { el.value = 'https://' + url; } };
            urlInputs.forEach(input => input.addEventListener('blur', (e) => formatUrl(e.target)));
            const addChallenge = (e) => {
                if (!e.target.classList.contains('add-challenge-btn')) return;
                const pBlock = e.target.closest('.persona-block');
                const pIndex = parseInt(pBlock.dataset.personaIndex, 10);
                const cContainer = pBlock.querySelector('.challenges-container');
                const cIndex = cContainer.children.length + 1;
                const nRow = document.createElement('div');
                nRow.className = 'challenge-row grid grid-cols-1 sm:grid-cols-2 gap-4';
                nRow.innerHTML = `<textarea name="Persona ${pIndex} - Wyzwanie ${cIndex}" class="form-textarea" placeholder="Opis wyzwania"></textarea><textarea name="Persona ${pIndex} - Odpowiedź ${cIndex}" class="form-textarea" placeholder="Nasze rozwiązanie"></textarea>`;
                cContainer.appendChild(nRow);
            };
            addPersonaBtn.addEventListener('click', () => {
                personaCounter++;
                const newPersonaBlock = personasContainer.children[0].cloneNode(true);
                newPersonaBlock.querySelector('h3').textContent = `Buyer Persona #${personaCounter}`;
                newPersonaBlock.querySelector('input[name*="Stanowisko"]').name = `Persona ${personaCounter} - Stanowisko`;
                newPersonaBlock.querySelector('input[name*="Stanowisko"]').value = '';
                const challengesContainer = newPersonaBlock.querySelector('.challenges-container');
                challengesContainer.innerHTML = '';
                const firstChallengeRow = document.createElement('div');
                firstChallengeRow.className = 'challenge-row grid grid-cols-1 sm:grid-cols-2 gap-4';
                firstChallengeRow.innerHTML = `<textarea name="Persona ${personaCounter} - Wyzwanie 1" class="form-textarea" placeholder="Opis wyzwania"></textarea><textarea name="Persona ${personaCounter} - Odpowiedź 1" class="form-textarea" placeholder="Nasze rozwiązanie"></textarea>`;
                challengesContainer.appendChild(firstChallengeRow);
                newPersonaBlock.dataset.personaIndex = personaCounter;
                personasContainer.appendChild(newPersonaBlock);
            });
            if (personasContainer.children[0]) { personasContainer.children[0].dataset.personaIndex = 1; }
            personasContainer.addEventListener('click', addChallenge);
            const showModal = (title, msg, isSuccess) => {
                modalContent.innerHTML = `<svg class="mx-auto h-16 w-16 ${isSuccess ? 'text-green-500' : 'text-red-500'}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${isSuccess ? 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z' : 'M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z'}" /></svg><h3 class="text-2xl font-bold mt-4">${title}</h3><p class="text-gray-600 mt-2">${msg}</p><button id="close-modal-btn" class="mt-6 bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg">Zamknij</button>`;
                modal.classList.add('is-visible');
                document.getElementById('close-modal-btn').addEventListener('click', () => modal.classList.remove('is-visible'));
            };
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                submitBtn.disabled = true;
                btnText.textContent = 'Wysyłanie...';
                spinner.classList.remove('hidden');
                
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'cors',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'text/plain;charset=utf-8',
                    },
                    body: JSON.stringify(data)
                })
                .then(res => res.json())
                .then(data => {
                    if (data.result === "success") {
                        showModal('Wysłano Pomyślnie!', 'Dziękujemy! Twój brief został odebrany.', true);
                        form.reset();
                    } else {
                        throw new Error(data.message || 'Wystąpił nieznany błąd serwera.');
                    }
                })
                .catch(error => {
                    showModal('Błąd Wysyłania', `Wystąpił problem podczas wysyłania formularza. Błąd: ${error.message}`, false);
                })
                .finally(() => {
                    submitBtn.disabled = false;
                    btnText.textContent = 'Wyślij Brief Automatycznie';
                    spinner.classList.add('hidden');
                });
            });
        </script>
    </div>
</body>
</html>
